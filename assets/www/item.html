<!DOCTYPE html> 
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=320; user-scalable=no" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />

        <title>Kau Ada?</title>
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="jquery-mobile/kauada.min.css" />
        
        
        
        <link rel="stylesheet" href="jquery-mobile/jquery.mobile.structure-1.3.1.min.css" />
        <script src="jquery-mobile/jquery-1.9.1.min.js"></script>
        <script src="jquery-mobile/jquery.mobile-1.3.1.min.js"></script>
        <script type="text/javascript" src="js/parse-1.2.10.js"></script>        
        
        <script type="text/javascript">
        var QueryString = function () {
           Parse.initialize("l3u5f6gZsv89a09Ie6ZjXqxgz4BNcoH4llwfTkfB", "3yzEpJ2G39tbg1xZPgVxOpPGh36dLPQfG6f1tukP");
        	
          // This function is anonymous, is executed immediately and 
          // the return value is assigned to QueryString!
          var query_string = {};
          var query = window.location.search.substring(1);
          var vars = query.split("&");
          for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            	// If first entry with this name
            if (typeof query_string[pair[0]] === "undefined") {
              query_string[pair[0]] = pair[1];
            	// If second entry with this name
            } else if (typeof query_string[pair[0]] === "string") {
              var arr = [ query_string[pair[0]], pair[1] ];
              query_string[pair[0]] = arr;
            	// If third or later entry with this name
            } else {
              query_string[pair[0]].push(pair[1]);
            }
          } 
            return query_string;
        } ();
        
        
        $(document).bind('mobileinit',function(){
			$.mobile.selectmenu.prototype.options.nativeMenu = false;
		});
		

function handleSocialShare()
{
    $('#select-choice-share option:selected').each(function()
    {
        text = $(".item_name").html();
        url ="http://bit.ly/hackprezreg";

        shareService = $(this).val()
        switch (shareService) {
            case "facebook":
                shareFacebookLike(url);
                break;
            case "twitter":
                shareTwitter(url, text);
                break;
            case "email":
                shareEmail(url, text);
                break;
            default:

        }
    });
}
function shareFacebookLike(url)
{
    window.location="http://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(url);
}
function shareTwitter(url, text)
{
    window.location = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(text) + "&url=" + encodeURIComponent(url);
}
function shareEmail(subject, body)
{
    window.location = "mailto:&subject=" + subject + "&body=" + body;
}		
		
		$(function(){
		   
		   var ItemList = Parse.Object.extend("ItemList");
         var query = new Parse.Query(ItemList);
         query.get(QueryString.itemid, {
           success: function(results) {
             // The object was retrieved successfully.
             $(".item_name").html(results.get('item_name'));
             $(".desc").append(results.get('desc'));
             $(".brand").append(results.get('brand'));
             $(".model").append(results.get('model'));
             $(".conditions").append(results.get('conditions'));
             $(".year").append(results.get('year'));
             $(".budget").append(results.get('budget'));
             $(".select_delivery").append(results.get('select_delivery'));
             $(".state").append(results.get('state'));
             $(".user_id").append(results.get('user_id'));
             
           },
           error: function(object, error) {
             // The object was not retrieved successfully.
             // error is a Parse.Error with an error code and description.
             alert("Error: " + error.code + " " + error.message);
           }
         });
         
         
		});
		
		</script>
        
        
    </head>
    <body>
<!-- PITEM_PAGE -->
<div data-role="page" id="pitem_page">
	<div data-role="header" data-id="head">
    <a data-rel="back" id="hback" class="ui-btn-left" data-theme="f" data-iconpos="notext" data-direction="reverse">Back</a>
		<center><img src="images/kauadabar.png"></center>
    <a href="index.html" rel="external" data-ajax="false" id="hhome" class="ui-btn-right" data-theme="f" data-iconpos="notext" data-transition="flip">Home</a>    
	</div><!-- /header -->

 
  <div data-role="content">

    
    <h1 class="item_name">Item name</h1>
 <hr/>
 <center><img src="images/kauada.jpg" style="width:60%; border:1px solid #000; padding:5px;"/></center>
     <p class="desc">Description: </p>
    <p class="brand">Brand: </p>
    <p class="model">Model: </p>
    <p class="conditions">Conditions: </p>
    <p class="year">Year: </p>
    <p class="budget">Budget: </p>
    <p class="select_delivery">Preferred delivery: </p>
    <p class="state">State: </p>
    <p class="user_id">By: </p>
    
     <label for="select-choice-share">Share</label>
    <select name="select-choice-share" id="select-choice-share" data-icon="forward" data-iconpos="left" onchange="handleSocialShare()">
        <option value="no">Share it</option>
        <option value="facebook">Post this on Facebook</option>
        <option value="twitter">Tweet this</option>
        <option value="email">Email this</option>
    </select>
    
    <a href="tel:+60126877933" id="bcontact" data-theme="f" data-role="button" data-iconpos="right" data-icon="arrow-r" data-transition="slide">
    Contact User
    </a>
    
  </div><!-- /content -->
</div>
<!-- /PITEM_PAGE -->  
    </body>
</html>